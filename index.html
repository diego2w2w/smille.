<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tienda Vape</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .page { display: none; padding: 20px; }
    .page.active { display: block; }
    h2 { margin-top: 0; }
    .product { margin-bottom: 15px; }
    label { display: block; margin: 5px 0 2px; }
    select, input[type="number"], input[type="text"], input[type="time"], input[type="date"] {
      width: 100%; max-width: 300px; padding: 5px; box-sizing: border-box;
    }
    .btn { margin: 10px 5px 0 0; padding: 10px 20px; background: #007BFF; border: none; color: white; cursor: pointer; border-radius: 4px; }
    .btn:hover { background: #0056b3; }
    #cart-count { font-weight: bold; margin-bottom: 15px; }
    #transferencia-info { background: #f0f8ff; padding: 10px; margin-top: 10px; border-radius: 4px; }
    #gallery-modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000;
      flex-direction: column;
    }
    #gallery-modal img {
      max-width: 90%; max-height: 80vh; border-radius: 8px;
    }
    #close-gallery {
      position: absolute; top: 20px; right: 30px; font-size: 40px; color: white; cursor: pointer;
      user-select: none;
    }
    .gallery-nav {
      font-size: 50px; color: white; cursor: pointer; margin: 0 20px;
      user-select: none;
      user-drag: none;
    }
    .gallery-nav:hover { color: #ccc; }
    #gallery-controls {
      display: flex; justify-content: center; margin-top: 10px; width: 100%;
    }
  </style>
</head>
<body>

<div id="cart-count">Total: 0 productos - $0</div>

<!-- Página 1: Selección de productos -->
<div class="page active" id="page1">
  <h2>Productos</h2>
  <div class="product">
    <strong>Pillow Talk 13mL</strong> - $200<br />
    <label for="qty1">Cantidad:</label>
    <input type="number" id="qty1" min="0" value="0" onchange="updateCart()" />
    <label for="sabor1">Sabor:</label>
    <select id="sabor1" onchange="updateCart()">
      <option value="clear">Clear</option>
      <option value="Bahanna mama">Bahanna mama</option>
      <option value="Euphria puddiing">Euphria puddiing</option>
      <option value="Mixed berries">Mixed berries</option>
    </select>
  </div>
  <div class="product">
    <strong>Snoopy Smoke Extra Tank 2 x 18ML</strong> - $250<br />
    <label for="qty2">Cantidad:</label>
    <input type="number" id="qty2" min="0" value="0" onchange="updateCart()" />
    <label for="sabor2">Sabor:</label>
    <select id="sabor2" onchange="updateCart()">
      <option value="clear">Clear</option>
      <option value="Bahanna mama">Bahanna mama</option>
      <option value="Euphria puddiing">Euphria puddiing</option>
      <option value="Mixed berries">Mixed berries</option>
    </select>
  </div>
  <div class="product">
    <strong>Lost vape orion bar</strong> - $170<br />
    <label for="qty3">Cantidad:</label>
    <input type="number" id="qty3" min="0" value="0" onchange="updateCart()" />
    <label for="sabor3">Sabor:</label>
    <select id="sabor3" onchange="updateCart()">
      <option value="clear">Clear</option>
      <option value="Bahanna mama">Bahanna mama</option>
      <option value="Euphria puddiing">Euphria puddiing</option>
      <option value="Mixed berries">Mixed berries</option>
    </select>
  </div>
  <div class="product">
    <strong>Death row</strong> - $200<br />
    <label for="qty4">Cantidad:</label>
    <input type="number" id="qty4" min="0" value="0" onchange="updateCart()" />
    <label for="sabor4">Sabor:</label>
    <select id="sabor4" onchange="updateCart()">
      <option value="clear">Clear</option>
      <option value="Bahanna mama">Bahanna mama</option>
      <option value="Euphria puddiing">Euphria puddiing</option>
      <option value="Mixed berries">Mixed berries</option>
    </select>
  </div>

  <button class="btn" onclick="prepareCart()">Siguiente</button>
</div>

<!-- Página 2: Datos de entrega y pago -->
<div class="page" id="page2">
  <h2>Datos de entrega</h2>
  <label for="dia">Día de entrega:</label>
  <input type="date" id="dia" />
  <label for="hora">Hora de entrega:</label>
  <input type="time" id="hora" />
  <label for="lugar">Lugar de entrega:</label>
  <input type="text" id="lugar" placeholder="Dirección, colonia, etc." />

  <h3>Método de pago</h3>
  <label><input type="radio" name="pago" value="Efectivo" onclick="setPago('Efectivo')" /> Efectivo</label>
  <label><input type="radio" name="pago" value="Transferencia" onclick="setPago('Transferencia')" /> Transferencia bancaria</label>

  <div id="transferencia-info" style="display:none;">
    <p><strong>Datos para transferencia:</strong></p>
    <p>Banco: Bancomer</p>
    <p>Cuenta: 1234 5678 9012 3456</p>
    <p>CLABE: 012345678901234567</p>
  </div>

  <button class="btn" onclick="showPage(1)">Regresar</button>
  <button class="btn" onclick="finalizarPedido()">Finalizar Pedido</button>
</div>

<!-- Página 3: Resumen -->
<div class="page" id="page3">
  <h2>Resumen del pedido</h2>
  <div id="resumen"></div>
  <button class="btn" onclick="showPage(2)">Regresar</button>
  <div id="mensaje-final" style="margin-top: 20px; font-weight: bold; color: green;"></div>
</div>

<!-- Modal galería -->
<div id="gallery-modal" onclick="closeGallery(event)">
  <span id="close-gallery" onclick="closeGallery(event)">&times;</span>
  <img id="gallery-img" src="" alt="Galería" />
  <div id="gallery-controls">
    <span class="gallery-nav" onclick="prevImage(event)">&#10094;</span>
    <span class="gallery-nav" onclick="nextImage(event)">&#10095;</span>
  </div>
</div>

<script>
const products = [
  {name: "Pillow Talk 13mL", price: 200, hits: 8500},
  {name: "Snoopy Smoke Extra Tank 2 x 18ML", price: 250, hits: 15000},
  {name: "Lost vape orion bar", price: 170, hits: 7500},
  {name: "Death row", price: 200, hits: 7000}
];

let cart = [
  {qty: 0, sabor: "clear"},
  {qty: 0, sabor: "Bahanna mama"},
  {qty: 0, sabor: "Euphria puddiing"},
  {qty: 0, sabor: "Mixed berries"}
];

let pagoMetodo = null;
let currentGalleryIndex = 0;
const galleryImages = [
  "va.png",
  "dosva.png",
  "v37.png",
  "snp1.png"
];

function updateCart() {
  for (let i = 0; i < products.length; i++) {
    const qtyInput = document.getElementById(`qty${i+1}`);
    const saborSelect = document.getElementById(`sabor${i+1}`);
    cart[i].qty = parseInt(qtyInput.value) || 0;
    cart[i].sabor = saborSelect.value;
  }
  updateCartHeader();
}

function updateCartHeader() {
  let totalQty = 0;
  let totalPrice = 0;
  for (let i = 0; i < cart.length; i++) {
    totalQty += cart[i].qty;
    totalPrice += cart[i].qty * products[i].price;
  }
  document.getElementById("cart-count").textContent = `Total: ${totalQty} productos - $${totalPrice}`;
}

function prepareCart() {
  updateCart();
  let totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
  if (totalQty === 0) {
    alert("Por favor selecciona al menos un producto.");
    return;
  }
  showPage(2);
}

function showPage(pageNum) {
  for (let i = 1; i <= 3; i++) {
    document.getElementById(`page${i}`).classList.remove("active");
  }
  document.getElementById(`page${pageNum}`).classList.add("active");

  // Mostrar info transferencia si es necesario
  document.getElementById("transferencia-info").style.display = pagoMetodo === "Transferencia" ? "block" : "none";
}

function setPago(metodo) {
  pagoMetodo = metodo;
  document.getElementById("transferencia-info").style.display = metodo === "Transferencia" ? "block" : "none";
}

function finalizarPedido() {
  const hora = document.getElementById("hora").value;
  const dia = document.getElementById("dia").value;
  const lugar = document.getElementById("lugar").value;

  if (!hora || !dia || !pagoMetodo || lugar.trim() === "") {
    alert("Por favor completa todos los datos de entrega y método de pago.");
    return;
  }

  let resumenHTML = "<ul>";
  cart.forEach((item, i) => {
    if (item.qty > 0) {
      resumenHTML += `<li>${item.qty} x ${products[i].name} (Sabor: ${item.sabor}) - $${item.qty * products[i].price}</li>`;
    }
  });
  resumenHTML += "</ul>";
  resumenHTML += `<p><strong>Entrega:</strong> ${dia} a las ${hora} en ${lugar}</p>`;
  resumenHTML += `<p><strong>Método de pago:</strong> ${pagoMetodo}</p>`;

  document.getElementById("resumen").innerHTML = resumenHTML;
  showPage(3);
  document.getElementById("mensaje-final").textContent = "¡Gracias por tu compra! Tu pedido está en proceso.";
}

function openGallery(name) {
  currentGalleryIndex = galleryImages.findIndex(img => img.includes(name.split(' ')[1]));
  if(currentGalleryIndex === -1) currentGalleryIndex = 0;
  showGalleryImage();
  document.getElementById("gallery-modal").style.display = "flex";
}

function showGalleryImage() {
  document.getElementById("gallery-img").src = galleryImages[currentGalleryIndex];
}

function closeGallery(event) {
  if(event) event.stopPropagation();
  document.getElementById("gallery-modal").style.display = "none";
}

function prevImage(event) {
  event.stopPropagation();
  currentGalleryIndex = (currentGalleryIndex - 1 + galleryImages.length) % galleryImages.length;
  showGalleryImage();
}

function nextImage(event) {
  event.stopPropagation();
  currentGalleryIndex = (currentGalleryIndex + 1) % galleryImages.length;
  showGalleryImage();
}

updateCart();
</script>

</body>
</html>

 

